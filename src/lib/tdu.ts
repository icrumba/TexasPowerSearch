export type TduName = 'oncor' | 'centerpoint' | 'aep-north' | 'aep-central' | 'tnmp';

export interface TduInfo {
  displayName: string;
  baseCharge: number; // USD/month
  deliveryCentsPerKwh: number; // cents/kWh
}

/** Per-TDU rate config (easy to differentiate later) */
export const TDU_RATES: Record<TduName, TduInfo> = {
  oncor: { displayName: 'Oncor', baseCharge: 4.23, deliveryCentsPerKwh: 5.10 },
  centerpoint: { displayName: 'CenterPoint', baseCharge: 4.39, deliveryCentsPerKwh: 5.31 },
  'aep-north': { displayName: 'AEP Texas North', baseCharge: 4.15, deliveryCentsPerKwh: 4.89 },
  'aep-central': { displayName: 'AEP Texas Central', baseCharge: 4.27, deliveryCentsPerKwh: 5.05 },
  tnmp: { displayName: 'TNMP', baseCharge: 7.85, deliveryCentsPerKwh: 4.65 },
};

/** Fallback rates when TDU is unknown */
export const DEFAULT_TDU_RATES: TduInfo = {
  displayName: 'Unknown',
  baseCharge: 4.23,
  deliveryCentsPerKwh: 5.10,
};

/** MVP ZIP-to-TDU mapping for sample ZIPs */
const ZIP_TO_TDU: Record<string, TduName> = {
  '75001': 'oncor',
  '75002': 'oncor',
  '75003': 'oncor',
  '75006': 'oncor',
  '75007': 'oncor',
  '75010': 'oncor',
  '75019': 'oncor',
  '75024': 'oncor',
  '75025': 'oncor',
  '75034': 'oncor',
  '75035': 'oncor',
  '75040': 'oncor',
  '75041': 'oncor',
  '75042': 'oncor',
  '75043': 'oncor',
  '75044': 'oncor',
  '75050': 'oncor',
  '75051': 'oncor',
  '75052': 'oncor',
  '75060': 'oncor',
  '75061': 'oncor',
  '75062': 'oncor',
  '75063': 'oncor',
  '75070': 'oncor',
  '75071': 'oncor',
  '75074': 'oncor',
  '75075': 'oncor',
  '75080': 'oncor',
  '75081': 'oncor',
  '75082': 'oncor',
  '75093': 'oncor',
  '75094': 'oncor',
  '75201': 'oncor',
  '75202': 'oncor',
  '75203': 'oncor',
  '75204': 'oncor',
  '75205': 'oncor',
  '75206': 'oncor',
  '75207': 'oncor',
  '75208': 'oncor',
  '75209': 'oncor',
  '75210': 'oncor',
  '75211': 'oncor',
  '75212': 'oncor',
  '75214': 'oncor',
  '75215': 'oncor',
  '75216': 'oncor',
  '75217': 'oncor',
  '75218': 'oncor',
  '75219': 'oncor',
  '75220': 'oncor',
  '75223': 'oncor',
  '75224': 'oncor',
  '75225': 'oncor',
  '75226': 'oncor',
  '75227': 'oncor',
  '75228': 'oncor',
  '75229': 'oncor',
  '75230': 'oncor',
  '75231': 'oncor',
  '75232': 'oncor',
  '75233': 'oncor',
  '75234': 'oncor',
  '75235': 'oncor',
  '75236': 'oncor',
  '75237': 'oncor',
  '75238': 'oncor',
  '75240': 'oncor',
  '75241': 'oncor',
  '75242': 'oncor',
  '75243': 'oncor',
  '75244': 'oncor',
  '75246': 'oncor',
  '75247': 'oncor',
  '75248': 'oncor',
  '75249': 'oncor',
  '75250': 'oncor',
  '75251': 'oncor',
  '75252': 'oncor',
  '75253': 'oncor',
  '75254': 'oncor',
  '77001': 'centerpoint',
  '77002': 'centerpoint',
  '77003': 'centerpoint',
  '77004': 'centerpoint',
  '77005': 'centerpoint',
  '77006': 'centerpoint',
  '77007': 'centerpoint',
  '77008': 'centerpoint',
  '77009': 'centerpoint',
  '77010': 'centerpoint',
  '77011': 'centerpoint',
  '77012': 'centerpoint',
  '77013': 'centerpoint',
  '77014': 'centerpoint',
  '77015': 'centerpoint',
  '77016': 'centerpoint',
  '77017': 'centerpoint',
  '77018': 'centerpoint',
  '77019': 'centerpoint',
  '77020': 'centerpoint',
  '77021': 'centerpoint',
  '77022': 'centerpoint',
  '77023': 'centerpoint',
  '77024': 'centerpoint',
  '77025': 'centerpoint',
  '77026': 'centerpoint',
  '77027': 'centerpoint',
  '77028': 'centerpoint',
  '77029': 'centerpoint',
  '77030': 'centerpoint',
  '77031': 'centerpoint',
  '77032': 'centerpoint',
  '77033': 'centerpoint',
  '77034': 'centerpoint',
  '77035': 'centerpoint',
  '77036': 'centerpoint',
  '77037': 'centerpoint',
  '77038': 'centerpoint',
  '77039': 'centerpoint',
  '77040': 'centerpoint',
  '77041': 'centerpoint',
  '77042': 'centerpoint',
  '77043': 'centerpoint',
  '77044': 'centerpoint',
  '77045': 'centerpoint',
  '77046': 'centerpoint',
  '77047': 'centerpoint',
  '77048': 'centerpoint',
  '77049': 'centerpoint',
  '77050': 'centerpoint',
  '77051': 'centerpoint',
  '77053': 'centerpoint',
  '77054': 'centerpoint',
  '77055': 'centerpoint',
  '77056': 'centerpoint',
  '77057': 'centerpoint',
  '77058': 'centerpoint',
  '77059': 'centerpoint',
  '77060': 'centerpoint',
  '77061': 'centerpoint',
  '77062': 'centerpoint',
  '77063': 'centerpoint',
  '77064': 'centerpoint',
  '77065': 'centerpoint',
  '77066': 'centerpoint',
  '77067': 'centerpoint',
  '77068': 'centerpoint',
  '77069': 'centerpoint',
  '77070': 'centerpoint',
  '77071': 'centerpoint',
  '77072': 'centerpoint',
  '77073': 'centerpoint',
  '77074': 'centerpoint',
  '77075': 'centerpoint',
  '77076': 'centerpoint',
  '77077': 'centerpoint',
  '77078': 'centerpoint',
  '77079': 'centerpoint',
  '77080': 'centerpoint',
  '77081': 'centerpoint',
  '77082': 'centerpoint',
  '77083': 'centerpoint',
  '77084': 'centerpoint',
  '77085': 'centerpoint',
  '77086': 'centerpoint',
  '77087': 'centerpoint',
  '77088': 'centerpoint',
  '77089': 'centerpoint',
  '77090': 'centerpoint',
  '77091': 'centerpoint',
  '77092': 'centerpoint',
  '77093': 'centerpoint',
  '77094': 'centerpoint',
  '77095': 'centerpoint',
  '77096': 'centerpoint',
  '77098': 'centerpoint',
  '77099': 'centerpoint',
  '79901': 'aep-north',
  '79902': 'aep-north',
  '79903': 'aep-north',
  '79904': 'aep-north',
  '79905': 'aep-north',
  '79906': 'aep-north',
  '79907': 'aep-north',
  '79908': 'aep-north',
  '79910': 'aep-north',
  '79911': 'aep-north',
  '79912': 'aep-north',
  '79915': 'aep-north',
  '79920': 'aep-north',
  '79922': 'aep-north',
  '79924': 'aep-north',
  '79925': 'aep-north',
  '79927': 'aep-north',
  '79928': 'aep-north',
  '79930': 'aep-north',
  '79932': 'aep-north',
  '79934': 'aep-north',
  '79935': 'aep-north',
  '79936': 'aep-north',
  '78201': 'aep-central',
  '78202': 'aep-central',
  '78203': 'aep-central',
  '78204': 'aep-central',
  '78205': 'aep-central',
  '78206': 'aep-central',
  '78207': 'aep-central',
  '78208': 'aep-central',
  '78209': 'aep-central',
  '78210': 'aep-central',
  '78211': 'aep-central',
  '78212': 'aep-central',
  '78213': 'aep-central',
  '78214': 'aep-central',
  '78215': 'aep-central',
  '78216': 'aep-central',
  '78217': 'aep-central',
  '78218': 'aep-central',
  '78219': 'aep-central',
  '78220': 'aep-central',
  '78221': 'aep-central',
  '78222': 'aep-central',
  '78223': 'aep-central',
  '78224': 'aep-central',
  '78225': 'aep-central',
  '78226': 'aep-central',
  '78227': 'aep-central',
  '78228': 'aep-central',
  '78229': 'aep-central',
  '78230': 'aep-central',
  '78231': 'aep-central',
  '78232': 'aep-central',
  '78233': 'aep-central',
  '78234': 'aep-central',
  '78235': 'aep-central',
  '78236': 'aep-central',
  '78237': 'aep-central',
  '78238': 'aep-central',
  '78239': 'aep-central',
  '78240': 'aep-central',
  '78242': 'aep-central',
  '78243': 'aep-central',
  '78244': 'aep-central',
  '78245': 'aep-central',
  '78247': 'aep-central',
  '78248': 'aep-central',
  '78249': 'aep-central',
  '78250': 'aep-central',
  '78251': 'aep-central',
  '78252': 'aep-central',
  '78253': 'aep-central',
  '78254': 'aep-central',
  '78255': 'aep-central',
  '78256': 'aep-central',
  '78257': 'aep-central',
  '78258': 'aep-central',
  '78259': 'aep-central',
  '78260': 'aep-central',
  '78261': 'aep-central',
  '76501': 'tnmp',
  '76502': 'tnmp',
  '76504': 'tnmp',
  '76508': 'tnmp',
  '76511': 'tnmp',
  '76513': 'tnmp',
  '76520': 'tnmp',
  '76528': 'tnmp',
  '76534': 'tnmp',
  '76541': 'tnmp',
  '76543': 'tnmp',
  '76548': 'tnmp',
  '76549': 'tnmp',
  '76550': 'tnmp',
  '76554': 'tnmp',
  '76559': 'tnmp',
  '76571': 'tnmp',
};

/**
 * Detect TDU utility by ZIP code
 * Returns null if ZIP is not in our mapping
 */
export function getTduByZip(zipCode: string): TduName | null {
  return ZIP_TO_TDU[zipCode] ?? null;
}

/**
 * Get TDU rate config. Falls back to default if TDU is unknown.
 */
export function getTduRates(tduName: TduName | null): TduInfo {
  if (tduName && TDU_RATES[tduName]) {
    return TDU_RATES[tduName];
  }
  return DEFAULT_TDU_RATES;
}
